document.addEventListener("DOMContentLoaded",()=>{document.body.addEventListener("click",async n=>{const t=n.target;if(!t||t.id!=="generate-alt-text-button")return;const e=t.getAttribute("data-post-id"),a=document.getElementById("loading-spinner"),o=AATXT==null?void 0:AATXT.altTextNonce;i(t,a,!0);try{const r=await(await fetch(ajaxurl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"generate_alt_text",nonce:o,post_id:e})})).json();if(!r.success){console.error("Error generating alt text:",r);return}l(r.data.alt_text)}catch(s){console.error("Error during AJAX request:",s)}finally{i(t,a,!1)}});function i(n,t,e){n.disabled=e,n.textContent=e?"Generating alt text...":"Generate Alt Text",t&&(t.style.display=e?"inline-block":"none",t.classList.toggle("is-active",e))}function l(n){var s,r,c,d;const t=document.querySelector(".attachment-info .setting.alt-text textarea"),e=document.getElementById("attachment-details-alt-text"),a=t||e;if(!a)return;a.value=n,a.dispatchEvent(new Event("change",{bubbles:!0}));const o=(d=(c=(r=(s=wp==null?void 0:wp.media)==null?void 0:s.frame)==null?void 0:r.content)==null?void 0:c.get)==null?void 0:d.call(c);typeof(o==null?void 0:o.save)=="function"&&o.save()}});
