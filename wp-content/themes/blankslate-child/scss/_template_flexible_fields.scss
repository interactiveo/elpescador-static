// FLEX FIELD: PARENT CLASSES
$row-gap: $gap*2;

.flexible-fields-wrap {

  .flexible-fields-row {
    position: relative;
    isolation: isolate;
    z-index: 2;
    margin-top: $row-gap;
    margin-bottom: $row-gap;

    &:is(.bkg-img-true,.bkg-color-true) {
      margin-top: 0;
      margin-bottom: 0;
      padding-top: $row-gap;
      padding-bottom: $row-gap;
    }

    .bkg-magic {
      position: absolute;
      inset: 0;
      pointer-events: none;
      user-select: none;
      z-index: -1;
    }

    .bottom-wave-space {
      height: $row-gap;
      pointer-events: none;
      user-select: none;
      visibility: hidden;
    }

    // Bottom Wave Space
    &.bottom-wave-space-false {
      .bottom-wave-space {
        display: none !important;
      }
    }

    // Wave True
    &.top-wave-true {
      padding-top: $row-gap*2;
      margin-top: -$row-gap;
      .bkg-magic {
        mask-image: url('/wp-content/themes/blankslate-child/img/blank-black.png'), url('/wp-content/themes/blankslate-child/img/image_mask_1.png');
        mask-repeat: repeat-x, repeat-x;
        mask-size: 100% 100%, auto $row-gap;
        mask-position: 0 $row-gap, 0 0;
        mask-composite: add, subtract;
      }
      &.bkg-color-false {
        .bkg-magic {
          background-color: white;
        }
      }
    }

    &:last-child {
      .bottom-wave-space {
        display: none;
      }
    }

    // Wave Patterns
    &:nth-child(5n+2) {
      .bkg-magic {
        mask-image: url('/wp-content/themes/blankslate-child/img/blank-black.png'), url('/wp-content/themes/blankslate-child/img/image_mask_2.png');
      }
    }
    &:nth-child(5n+3) {
      .bkg-magic {
        mask-image: url('/wp-content/themes/blankslate-child/img/blank-black.png'), url('/wp-content/themes/blankslate-child/img/image_mask_4.png');
      }
    }
    &:nth-child(5n+4) {
      .bkg-magic {
        mask-image: url('/wp-content/themes/blankslate-child/img/blank-black.png'), url('/wp-content/themes/blankslate-child/img/image_mask_5.png');
      }
    }

  }//.flexible-fields-row

  .flexible-fields-row:has(+ .top-wave-false) {
    .bottom-wave-space {
      display: none !important;
    }
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .flexible-fields-row {
      margin-top: $row-gap*2;
      margin-bottom: $row-gap*2;
  
      &:is(.bkg-img-true,.bkg-color-true) {
        margin-top: 0;
        margin-bottom: 0;
        padding-top: $row-gap*2;
        padding-bottom: $row-gap*2;
      }
  
      .bottom-wave-space {
        height: $row-gap*2;
      }
  
      // Wave True
      &.top-wave-true {
        padding-top: $row-gap*4;
        margin-top: -$row-gap*2;
        .bkg-magic {
          mask-size: 100% 100%, auto $row-gap*2;
          mask-position: 0 $row-gap*2, 0 0;
        }
      }
  
    }//.flexible-fields-row

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}//.flexible-fields-wrap

// FLEX FIELD: CONTENT
.flex-id-content {
}


// FLEX FIELD: MENU
.flex-id-menu {

  .col-top-content {
    .section-content {
      max-width: $viewport-md;
      margin-left: auto;
      margin-right: auto;
    }
  }

  .menu-layout-simple {
    .col-top-content {
      .section-content {
        max-width: 100%;
      }
    }
    .col-top-content + .col-simple-menu {
      margin-top: -$gap;
    }
  }
  
  #dragScroll {
    .col-card-1 {
      width: 17.8125rem;
      max-width: 50vw;
    }
    .col-card-2 {
      width: 37.5rem;
      max-width: 66vw;
    }
  }

  .menu-link-card1,
  .menu-link-card2 {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    aspect-ratio: 2 / 3;
    background: setcolor(green,dark);
    border-radius: $border-radius;
    padding: 2.5rem 2.5rem 3.25rem 2.5rem;
    text-decoration: none;
    position: relative;
    overflow: hidden;
    box-shadow: 0 .75rem 1rem -0.25rem rgba(0, 0, 0, 0.08), 0 .25rem .375rem -0.125rem rgba(0, 0, 0, 0.03);
    @include transition(0.5s);
    transition-property: box-shadow;
    cursor: pointer;
    * {
      pointer-events: none;
      user-select: none;
    }
    .post-title {
      font-size: 1em;
      text-transform: uppercase;
      font-weight: 600;
      line-height: 1.25;
      letter-spacing: 0.05em;
      position: relative;
      z-index: 2;
      color: white;
      text-wrap: balance;
      text-shadow: 0 .25rem .5rem rgba(0, 0, 0, 0.30), 0 2px 4px rgba(0, 0, 0, 0.12);
      @include transition(0.5s);
      transition-property: opacity;
    }
    .decorate-title {
      position: absolute;
      bottom: 2.5rem;
      left: 2.5rem;
      right: 2.5rem;
      line-height: 1;
      font-family: $font-headline;
      text-transform: uppercase;
      font-weight: 900;
      font-size: 1.45em;
      text-overflow:clip;
      letter-spacing: 0.05em;
      color: #F9C748;
      z-index: 1;
      opacity: 0.4;
      margin: 0;
      white-space: normal;
      word-wrap: break-word;
      overflow-wrap: break-word;
      hyphens: auto;
      max-width: calc(100% - 5rem);      
      @include transition(0.5s);
      transition-property: opacity;
    }
    .menu-bkg {
      @include transition(0.5s);
      transition-property: scale opacity;
      scale: 1;
      opacity: 0.7;
    }
    @include hover {
      box-shadow: 0 .75rem 1rem -0.25rem rgba(0, 0, 0, 0.15), 0 .25rem .375rem -0.125rem rgba(0, 0, 0, 0.35);
      cursor: pointer;

      .post-title {
        opacity: 0;
      }
      .decorate-title {
        opacity: 1;
        transition-delay: 0.15s;
      }
      .menu-bkg {
        scale: 1.15;
        opacity: 0.4;
      }
    }
  }//.menu-link-card1

  .menu-link-card2 {
    aspect-ratio: 3 / 2;
    justify-content: center;
    align-items: center;
    text-align: center;
    padding: 2.5rem;
    .decorate-title {
      bottom: calc(50% - 0.5rem);
      transform: translateY(50%);
    }
    .menu-bkg {
      opacity: 1;
    }
    .post-title {
      font-size: 1.4em;
    }

    @include hover {
      .menu-bkg {
        opacity: 0.4;
      }
    }

  }//.menu-link-card2

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {
  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}//.flex-id-menu


// FLEX FIELD: ICON BOXES
.flex-id-icon_boxes {

  .icon-box-wrapper {
    backdrop-filter: blur(3px);
    padding: 2.5rem;
    color: setcolor(black,base);
    .label {
      color: setcolor(green,dark);
    }
    .body-area {
      strong, b {
        color: setcolor(teal,base);
      }
    }
  }

  .icon-box-header {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    gap: $gap;
    align-items: center;

    .icon-box-img {
      width: 5.125rem;
      max-width: 5.125rem;
      object-fit: contain;
      aspect-ratio: 1 / 1;
    }

    .label {
      margin: 0;
      flex: 1;
    }

  }

  p {
    font-size: 0.88em;
  }

  p.cta {
    margin-top: 2.1875rem;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {
  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {

    .icon-box-wrapper {
      padding: 3.125rem 3.75rem;
    }

  }//lg

}//.flex-id-icon_boxes


// FLEX FIELD: HOMEPAGE PROMO 1
.flexible-fields-wrap .flexible-fields-row.flex-id-homepage_promo_1 {

  .white-content-box {
    max-width: 600px;
    margin-left: auto;
  }

  .inside {
    z-index: 10;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .row--main {
      gap: 6.25rem 0;
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {

    .white-content-box {
      padding: 4.0625rem;
    }

  }//lg

}//.flex-id-homepage_promo_1


// FLEX FIELD: HOMEPAGE PROMO 2
.flexible-fields-wrap .flexible-fields-row.flex-id-homepage_promo_2 {

  .inside {
    z-index: 3;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .fish-top {
      img {
        width: 65%;
      }
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}//flex-id-homepage_promo_2 


// FLEX FIELD: HOMEPAGE PROMO 3
.flexible-fields-row.flex-id-homepage_promo_3 {

  .off-screen-adjust {
    margin-left: -60vw;
    margin-right: -60vw;
  }

  .swiper {
    pointer-events: none;
  }

  .transition {
    @include transition(0.25s);
  }

  .swiper-slide {
    padding-right: 1.5rem;
  }

  .image-container {
    flex-wrap: nowrap;
    .col-xs {
      &.col-count-1 {
        flex: 0 0 20%;
        align-self: flex-start;
        padding-top: 3%;
      }
      &.col-count-2 {
        flex: 0 0 27%;
      }
      &.row-count-2 {
        flex: 0 0 19%;
      }
      &.row-count-3 {
        flex: 0 0 14%;
      }
      &.col-count-3 {
        flex: 0 0 100%;
      }
      &.col-count-4 {
        flex: 0 0 100%;
      }
      &.col-count-5 {
        flex: 0 0 100%;
      }
      &.col-count-6 {
        flex: 0 0 100%;
      }
      &.col-count-7 {
        flex: 0 0 20%;
        align-self: flex-end;
        padding-bottom: 3%;
      }
    }
    .inner-row {
      height: auto;
      .col {
        margin-bottom: $gap;
        &:last-child {
          margin-bottom: 0;
        }
      }
    }
  }

  .img-take-over {
    object-fit: cover;
    width: 100%;
    max-width: none;
  }

  .img-count-1 {
    aspect-ratio: 2 / 3;
  }

  .img-count-2 {
    aspect-ratio: 1 / 1.6;
  }

  .img-count-6 {
    aspect-ratio: 3 / 4;
  }

  .img-count-7 {
    aspect-ratio: 2 / 3;
  }

  :is(.img-count-3,.img-count-4,.img-count-5) {
    aspect-ratio: 1 / 1;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .off-screen-adjust {
      margin-left: -25vw;
      margin-left: -25vw;
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {

    .off-screen-adjust {
      margin-left: -11vw;
      margin-right: -11vw;
    }

  }//lg

}//flex-id-homepage_promo_3


// FLEX FIELD: HOMEPAGE PROMO 4
.flexible-fields-row.flex-id-homepage_promo_4 {

  .main--row {
    gap: 3.125rem 0;
  }

  .reviews-wrap {
    backdrop-filter: blur(4px);
    position: relative;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .main--row {
      gap: 6.25rem 0;
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}//flex-id-homepage_promo_4

// FLEX FIELD: POST TYPE
.flex-id-post_type {

  .post-type-selection--event {

    .event-slide {
      width: 24.375rem;
      max-width: 45vw;
    }

    // SM -------------------------------------------
    @include breakpoint(sm) {
    }//sm

    // MD  ------------------------------------------
    @include breakpoint(md) {

      .section-content {
        > * {
          width: 65%;
        }
        p {
          text-wrap: balance;
        }
        p.cta {
          width: 35%;
          position: absolute;
          right: 0;
          top: 50%;
          transform: translateY(-50%);
          margin: 0;
          text-align: right;
        }
      }

    }//md

    // LG -------------------------------------------
    @include breakpoint(lg) {
    }//lg

  }//.post-type-selection--event

  .post-type-selection--adventures {
    .row--query {
      gap: 6.25rem 0;
    }
    .featured--image {
      overflow: hidden;
      box-shadow: 0 .5rem .5rem -0.25rem rgba(0, 0, 0, 0.08), 0 .5rem .5rem -0.25rem rgba(0, 0, 0, 0.03);
      img {
        scale: 1;
        @include transition(0.5s);
        transition-property: scale;
      }
      @include hover {
        img {
          scale: 1.15;
        }
      }
    }
  }

}//flex-id-post_type


// FLEX FIELD: PROMO
.promo-wrap {
  backdrop-filter: blur(4px);

  #open-promo-video {
    display: block;
    width: 100%;
    border-radius: 0;
    border: 0;
    appearance: none;
    padding: 0;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .row--main {
      min-height: 375px;
    }

    .col-left {
      display: flex;
      flex-direction: column;
    }

    .featured--image {
      aspect-ratio: auto;
      height: 100%;
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}

// Dialog Container
#local-video,
#promo-video {
  padding: 0;
  border: 0;
  transform: translateY(100%) translate3d(0, 0, 0);
  overflow: visible;
  background: none;
  border-radius: $border-radius;
  box-shadow: 0 0 1rem 0 rgba(#000,0.25);
  background-color: black;
  video {
    display: block;
    width: auto;
    max-width: 90vw;
    height: auto;
    max-height: 75vh;
    aspect-ratio: 16 / 9;
    object-fit: contain;
    border-radius: $border-radius;
    background-color: black;
  }
  #close-local-video,
  #close-promo-video {
    position: absolute;
    top: 0;
    right: 0;
    transform: translateX(50%) translateY(-50%);
    background-color: white;
    width: 3.125rem;
    aspect-ratio: 1 / 1;
    border-radius: 50%;
    overflow: hidden;
    display: block;
    border: 0;
    appearance: none;
    padding: 0;
    box-shadow: 0 0 1rem 0 rgba(#000,0.25);
    color: #000;
    @include transition(0.25s);
    .icon-close {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translateX(-50%) translateY(-50%);
      line-height: 1;
      font-size:1.25rem;
    }
    i {
      display: none;
    }
    &:hover {
      background-color: setcolor(green,base);
      color: setcolor(green,dark);
    }
  }
  &::backdrop {
    opacity: 1;
    background: rgba(setcolor(green,dark2),0.85);
    backdrop-filter: blur(10px);
  }
  &[open] {
    animation: openModal 1s forwards;
  }
}

// FLEX FIELD: LOCAL VIDEO
.flex-id-video_local {
  #open-local-video {
    display: block;
    width: 100%;
    border-radius: 0;
    border: 0;
    appearance: none;
    padding: 0;
    overflow: hidden;
    border-radius: $border-radius;
  }
}

// Credibility Badges
.wrap_credibility_badges {
  .col-xs {
    min-width: fit-content;
  }
  a {
    display: block;
    position: relative;
  }
  :is(svg,img) {
    display: block;
    width: auto;
    height: 6.5rem;
    max-width: 8.4375rem;
    object-fit: contain;
    object-position: 50% 50%;
    user-select: none;
    pointer-events: none;
    filter: drop-shadow(0 .125rem .3125rem rgba(#000,0.2));
  }
}

.body-area {
  p + .wrap_credibility_badges {
    margin-top: $gap*2;
  }
}

// FLEX FIELD: IMAGE SECTION SEPERATOR
.flex-id-image_section_seperator {

  .bkg-magic {
    display: none;
    &.manual {
      display: block;
    }
  }

  .image-spacer {
    aspect-ratio: 5 / 1;
  }

}

// FLEX FIELD: MONTHLY CONTENT
.flex-id-content_monthly {

  .main--row {
    gap: 2.5em 0;
    padding-top: 1.4em;
  }

  .monthly-col {
    padding-left: calc(1.56rem + 2.22em);
    padding-right: calc(1.56rem + 2.22em);
    .label {
      isolation: isolate;
      position: relative;
      z-index: 0;
      &:after {
        content: "";
        display: block;
        position: absolute;
        top: 50%;
        left: 0;
        transform: translateY(-50%) translateX(-50%);
        width: 3.3em;
        aspect-ratio: 1 / 1;
        border-radius: 50%;
        background-color: #D6EBEC;
        z-index: -1;
        pointer-events: none;
        user-select: none;
      }
    }
    p {
      font-size: 0.85em;
      position: relative;
      z-index: 2;
      text-wrap: balance;
    }
    > * {
      margin-bottom: 1.15em;
      margin-top: 1.15em;
      &:first-child {
        margin-top: 0 !important;
      }
      &:last-child {
        margin-bottom: 0 !important;
      }
    }
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .monthly-col {
      padding-right: $gap;
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}//.flex-id-content_monthly


// FLEX FIELD: PROMO
.flex-id-promo {

  .box-shadow {
    box-shadow: 0 1.25rem 1.5rem -0.25rem rgba(0, 0, 0, 0.08), 0 .5rem .5rem -0.25rem rgba(0, 0, 0, 0.03);
  }

  .col-left {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    > * {
      display: block;
      flex: 0 0 100%;
      margin: auto 0;
      height: auto;
    }
  }

  .bg-white-shade1 {
    backdrop-filter: blur(3px);
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {
    .featured--image {
      aspect-ratio: auto;
      height: 100%;
      min-height: 375px;
    }
  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {

    .padding {
      padding: 4.0625rem;
    }

  }//lg


}//flex-id-promo


// FLEX FIELD: VIDEO
.flex-id-video {

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {
  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {

    .col-content {
      padding-left: $gap*2;
    }

  }//lg

}

// FLEX FIELD: CONTENT COLUMNS
.flex-id-content_columns {

  h2.headline + .info-box {
    margin-top: $gap*2;
  }

  // SM -------------------------------------------
  @include breakpoint(sm) {
  }//sm

  // MD  ------------------------------------------
  @include breakpoint(md) {

    .content-col {

      &.col-md {
        min-width: fit-content;
      }
      p.cta {
        white-space: nowrap;
      }
    }

  }//md

  // LG -------------------------------------------
  @include breakpoint(lg) {
  }//lg

}

// FLEX FIELD: GALLERY
.flex-id-image_gallery {
  overflow: hidden;

  .swiper-grid > .swiper-wrapper {
    gap: 30px 0;
    .swiper-slide {
      margin-top: 0 !important;
      margin-bottom: 0 !important;
    }
  }

  .swiper-pagination {
    margin-top: calc(30px + 1.5rem);
  }

  a.featured--image {
    box-shadow: 0 .75rem 1rem -0.25rem rgba(0, 0, 0, 0.08), 0 .25rem .375rem -0.125rem rgba(0, 0, 0, 0.03);
    @include transition(0.5s);
    transition-property: box-shadow;
    img {
      scale: 1.2;
      opacity: 1;
      transform-origin: 50% 0;
      @include transition(0.5s);
      transition-property: scale, opacity;
    }
    @include hover {
      box-shadow: 0 .75rem 1rem -0.25rem rgba(0, 0, 0, 0.15), 0 .25rem .375rem -0.125rem rgba(0, 0, 0, 0.35);
      img {
        opacity: 0.5;
        scale: 1;
      }
    }
  }

}


// FLEX FIELD: VIDEO GALLERY
.flex-id-video_gallery {

  .video-slide {
    //width: 17.8125rem;
    //max-width: 50vw;
  }

  a.video-gallery--entry {
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    padding: 2.5rem;
    color: white;
    text-decoration: none;
    isolation: isolate;
    box-shadow: 0 .75rem 1rem -0.25rem rgba(0, 0, 0, 0.08), 0 .25rem .375rem -0.125rem rgba(0, 0, 0, 0.03);
    @include transition(0.5s);
    transition-property: box-shadow;
    .object-cover-wrap {
      z-index: -1;
      overflow: hidden;
      img {
        @include transition(0.5s);
        transition-property: scale opacity;
        scale: 1;
        opacity: 0.7;
      }
    }
    .video-label {
      color: white;
      font-size: 1em;
      text-transform: uppercase;
      font-weight: 600;
      line-height: 1.25;
      letter-spacing: 0.05em;
      text-shadow: 0 .25rem .5rem rgba(0, 0, 0, 0.30), 0 2px 4px rgba(0, 0, 0, 0.12);
    }
    @include hover {
      box-shadow: 0 .75rem 1rem -0.25rem rgba(0, 0, 0, 0.15), 0 .25rem .375rem -0.125rem rgba(0, 0, 0, 0.35);
      .object-cover-wrap {
        img {
          opacity: 0.4;
          scale: 1.15;
        }
      }
    }
  }

  .swiper-pagination {
    margin-top: $gap*2;
  }

}

/// FLEX FIELD: CONTENT + IMAGE
.flex-id-content_image {

  .featured--image {
    &:not(.circle) {
      img {
        border-radius: $border-radius;
      }
    }
  }

}